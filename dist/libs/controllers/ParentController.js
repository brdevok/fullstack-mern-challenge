"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _children=_interopRequireDefault(require("../../database/schemas/children"));var _parent=_interopRequireDefault(require("../../database/schemas/parent"));var _bcrypt=_interopRequireDefault(require("bcrypt"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}class ParentController{static async createParent(data){data.password=await _bcrypt.default.hash(data.password,10);return await _parent.default.create(data).then(results=>{return results}).catch(error=>{console.log(error.message);throw new Error(error.code)})}static async getProfile(id){return await _parent.default.findOne({_id:id},"name surname document").populate("children","name surname document",_children.default).then(results=>{return results}).catch(error=>{console.log(error.message);throw new Error(error.code)})}static async updateProfile(id,data){if(data.password)data.password=await _bcrypt.default.hash(data.password,10);else delete data.password;return await _parent.default.updateOne({_id:id},data).then(results=>{return results}).catch(error=>{console.log(error.message);throw new Error(error.code)})}static async getAuthCredentials(document){return await _parent.default.findOne({document},"password").then(results=>{return results}).catch(error=>{console.log(error.message);throw new Error(error.code)})}}var _default=ParentController;exports.default=_default;