"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _ErrorHandler=_interopRequireDefault(require("../libs/errors/ErrorHandler"));var _ChildrenController=_interopRequireDefault(require("../libs/controllers/ChildrenController"));var _ParentController=_interopRequireDefault(require("../libs/controllers/ParentController"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const entry="/api";var _default=app=>{app.get(`${entry}/profile`,async(req,res)=>{try{let profileData;if(req.user.isParent){profileData=await _ParentController.default.getProfile(req.user.id)}else{profileData=await _ChildrenController.default.getProfile(req.user.id)}res.json(profileData)}catch(e){res.json(_ErrorHandler.default.response(e.message))}});app.put(`${entry}/profile`,async(req,res)=>{try{await _ParentController.default.updateProfile(req.user.id,req.body);res.json({updated:true})}catch(e){res.json(_ErrorHandler.default.response(e.message))}});app.post(`${entry}/children`,async(req,res)=>{try{await _ChildrenController.default.createChild(req.user.id,req.body);res.json({created:true})}catch(e){res.json(_ErrorHandler.default.response(e.message))}});app.get(`${entry}/children/:id`,async(req,res)=>{try{const childData=await _ChildrenController.default.getProfile(req.params.id);res.json(childData)}catch(e){res.json(_ErrorHandler.default.response(e.message))}});app.put(`${entry}/children/:id`,async(req,res)=>{try{await _ChildrenController.default.updateProfile(req.params.id,req.body);res.json({updated:true})}catch(e){res.json(_ErrorHandler.default.response(e.message))}});app.delete(`${entry}/children/:id`,async(req,res)=>{try{await _ChildrenController.default.deleteChild(req.params.id,req.user.id);res.json({deleted:true})}catch(e){res.json(_ErrorHandler.default.response(e.message))}})};exports.default=_default;